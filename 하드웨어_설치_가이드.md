# ğŸ”§ Base Revolt v2.0 Hardware Setup Guide / í•˜ë“œì›¨ì–´ ì„¤ì¹˜ ê°€ì´ë“œ

## ğŸ‡ºğŸ‡¸ English

### ğŸ“¦ Bill of Materials

#### Control ESP-32S Board
- ESP32 development board (standard ESP-32S) Ã— 1
- L298N Mini motor driver Ã— 1
- **Drive motor** (rear-wheel drivetrain) Ã— 1
- **Steering motor** (front steering) Ã— 1 â€“ DC motor or servo
- Jumper wires
- 7â€“12 V battery pack (RC car power)
- USB cable (for flashing)

**Control Style:**
- Standard RC car layout (independent drive + steering)
- Not a tank drive; behaves like a real vehicle

#### Camera ESP32-S3 Board
- ESP32-S3 WROOM CAM dev board Ã— 1
- OV2640 or OV5640 camera module (usually bundled)
- USB cable (for flashing)
- External power source (5 V / 2 A recommended)

#### Software
- Arduino IDE 1.8.19+ or 2.x
- ESP32 board package
- Required libraries

---

### 1ï¸âƒ£ Arduino IDE Setup

#### Install the ESP32 Board Package
1. Launch Arduino IDE
2. Go to **File â†’ Preferences**
3. Append to **Additional Board Manager URLs**:
```
https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
```
4. Open **Tools â†’ Board â†’ Boards Manager**
5. Search "esp32" â†’ install **ESP32 by Espressif Systems** (v2.0.14 or newer)

#### Install Required Libraries
In **Tools â†’ Manage Libraries**, search & install:
1. **WebSockets** by Markus Sattler (â‰¥ v2.4.1)
2. **ArduinoJson** by Benoit Blanchon (â‰¥ v6.21.0)
3. **esp32-camera** (bundled with the ESP32 board package)

---

### 2ï¸âƒ£ Control ESP-32S Setup

#### Wiring (Automotive Layout)
```
ESP-32S          â†’    L298N Mini
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GPIO 12          â†’    IN1 (drive motor â€“ forward/back)
GPIO 13          â†’    IN2 (drive motor â€“ forward/back)
GPIO 14          â†’    IN3 (steering motor â€“ left/right)
GPIO 15          â†’    IN4 (steering motor â€“ left/right)
5V               â†’    5V (logic power)
GND              â†’    GND

L298N Mini       â†’    Motors & Battery
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
OUT1, OUT2       â†’    Drive motor (rear wheels)
OUT3, OUT4       â†’    Steering motor (front wheels)
VIN (12V)        â†’    Battery + (7â€“12 V)
GND              â†’    Battery â€“
ENA jumper       â†’    ON (installed)
ENB jumper       â†’    ON (installed)
```
**Notes:**
- **Standard RC car control:** drive (forward/back) + steering (left/right) operate independently
- Provide 5 V logic power from the battery (not from the ESP32 regulator)
- Tie all grounds together (ESP32, L298N, battery)
- Swap output wires or invert logic if directions are reversed
- Steering motor can be a DC motor or a servo (servo is recommended for auto-centering)

#### Flash the Firmware
1. Open `hardware/esp32s_control.ino`
2. Update the `TODO` values:
```cpp
// WiFi credentials
const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";

// WebSocket server (Render)
const char* ws_host = "base-revolt-server.onrender.com";

// Device identifier
const char* DEVICE_ID = "CAR01";  // Use CAR02, CAR03... for additional cars
```
3. Board configuration:
   - Tools â†’ Board â†’ **ESP32 Dev Module**
   - Upload Speed: **115200**
   - CPU Frequency: **240 MHz**
   - Flash Size: **4 MB**
   - Choose the correct COM port
4. Press **Upload** (â†’)
5. Open **Serial Monitor** (115200 baud)
   - Confirm Wi-Fi connection
   - Confirm WebSocket connection
   - Watch for: `{"type":"register","deviceId":"CAR01","role":"control"}`

#### Self-test Sequence
- Runs automatically after flashing
- Expected motion:
  1. **Drive forward** 0.5 s â†’ stop
  2. **Drive backward** 0.5 s â†’ stop
  3. **Steer left** 0.3 s â†’ center
  4. **Steer right** 0.3 s â†’ center
  5. **Combo test** (forward + left) 0.5 s

**Troubleshooting:**
- Motors idle â†’ check battery voltage, ENA/ENB jumpers
- Drive direction reversed â†’ swap OUT1/OUT2 or flip `MOTOR_DRIVE_IN1/IN2`
- Steering direction reversed â†’ swap OUT3/OUT4 or flip `MOTOR_STEER_IN3/IN4`
- Steering doesnâ€™t re-center â†’ use a servo or add mechanical stops

---

### 3ï¸âƒ£ Camera ESP32-S3 Setup

#### Wiring
ESP32-S3 WROOM CAM typically ships with the camera attached.
```
ESP32-S3 WROOM   â†’    External Power
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5V (or USB)      â†’    5 V / 2 A supply
GND              â†’    GND
```
**Notes:**
- Use a dedicated 5 V / 2 A adapter if USB power is insufficient
- Confirm ribbon cable orientation (varies by manufacturer)

#### Flash the Firmware
1. Open `hardware/esp32s3_camera.ino`
2. Update the values:
```cpp
// WiFi (same as control board)
const char* ssid = "YOUR_WIFI_SSID";
const char* password = "YOUR_WIFI_PASSWORD";

// WebSocket server (same as control)
const char* ws_host = "base-revolt-server.onrender.com";

// Device ID (must match control board)
const char* DEVICE_ID = "CAR01";
```
3. Verify the pin map
   - Match to your ESP32-S3 board
   - Defaults target **Freenove ESP32-S3 WROOM CAM**
   - Example:
```cpp
#define PWDN_GPIO_NUM     -1
#define RESET_GPIO_NUM    -1
#define XCLK_GPIO_NUM     10
#define SIOD_GPIO_NUM     40
#define SIOC_GPIO_NUM     39
// ... see source for remaining pins
```
4. Board configuration:
   - Tools â†’ Board â†’ **ESP32S3 Dev Module**
   - USB CDC On Boot: **Enabled**
   - CPU Frequency: **240 MHz**
   - Flash Size: **8 MB** (16 MB on N16R8)
   - PSRAM: **OPI PSRAM** if available
   - Select the correct COM port
5. Upload sequence:
   - Hold **BOOT** while upload starts
   - When â€œConnectingâ€¦â€ appears, tap **RESET** once
   - Release **BOOT** once flashing begins
6. Serial Monitor (115200 baud):
   - Confirm Wi-Fi connection
   - Look for `âœ… Camera initialized successfully`
   - Confirm registration payload: `{"type":"register","deviceId":"CAR01","role":"camera"}`

#### Testing
- Check FPS logs (~15 FPS target)
- Verify live video in the frontend

**Troubleshooting:**
- `Camera init failed` â†’ double-check pin mapping / ribbon cable
- No video â†’ verify Wi-Fi/WebSocket, check Render logs
- Low FPS â†’ enable PSRAM, adjust `fb_count`, reduce resolution/quality

---

### 4ï¸âƒ£ Deploy the Render Server

#### Option 1 â€“ Update existing deployment (recommended)
```bash
cd C:\dev\BaseRevolt
git add server/index.js
git commit -m "feat: v2.0 split architecture"
git push origin wallet-onchainkit-migration
```
- Confirm auto-deploy on Render dashboard
- Look for `Base Revolt WebSocket Server (v2.0 - Split Architecture)` in logs

#### Option 2 â€“ Local testing
```bash
cd server
npm install
npm start
```
- Visit `http://localhost:8080`
- Expected JSON:
```json
{
  "status": "running",
  "service": "Base Revolt WebSocket Server (v2.0 - Split Architecture)",
  "devices": {},
  "webUsers": 0
}
```

---

### 5ï¸âƒ£ Deploy the Frontend

#### Local test
```bash
cd frontend
npm install
npm run dev
```
- Open `http://localhost:3000`

#### Vercel deployment
```bash
git add frontend/src/components/VideoStream.jsx
git commit -m "feat: v2.0 carId payload"
git push origin wallet-onchainkit-migration
```
- Vercel auto-deploys the change

---

### 6ï¸âƒ£ End-to-End Testing

#### Steps
1. **Render server health**
   - Visit `https://base-revolt-server.onrender.com`
   - Confirm `"status": "running"`
2. **Power up control board**
   - Apply power
   - Check Serial Monitor for registration
   - Render log should show `âœ… Device registered: CAR01 (control)`
3. **Power up camera board**
   - Apply power
   - Check Serial Monitor for registration
   - Render log should show `âœ… Device registered: CAR01 (camera)`
4. **Open the frontend**
   - Visit `https://base-revolt.vercel.app`
   - Connect wallet
   - Click **Demo Play** or **Buy Ticket**
5. **Verify behavior**
   - âœ… Live video stream visible
   - âœ… WASD controls move the car:
     - **W** â†’ forward (drive motor forward)
     - **S** â†’ reverse (drive motor backward)
     - **A** â†’ turn left (steering motor left)
     - **D** â†’ turn right (steering motor right)
     - **Space** â†’ stop (drive stop + steering center)
   - âœ… FPS around 10â€“15
   - âœ… Steering works while driving (simultaneous input)

---

### ğŸ› Troubleshooting

#### Video works, controls do not
**Cause:** Control board offline
**Fix:**
1. Check Serial Monitor on control board
2. Verify Wi-Fi connection
3. Confirm WebSocket registration payload was sent
4. Ensure Render lists the control device

#### Controls work, video does not
**Cause:** Camera board offline
**Fix:**
1. Check Serial Monitor on camera board
2. Resolve `Camera init failed` (pin map)
3. Confirm registration payload was sent
4. Ensure Render lists the camera device

#### Both video & control fail
**Cause:** Render server or Wi-Fi issue
**Fix:**
1. Inspect Render logs (dashboard â†’ Logs)
2. Verify ESP32 Wi-Fi connection
3. Double-check `ws_host` (domain only, no https://)
4. Review firewall/router rules

#### FPS below 5
**Cause:** Insufficient bandwidth or configuration
**Fix:**
1. Ensure PSRAM is enabled
2. Lower resolution (`FRAMESIZE_SVGA` â†’ `FRAMESIZE_VGA`)
3. Lower JPEG quality (12 â†’ 20)
4. Improve Wi-Fi signal

#### Device ID conflicts
**Symptom:** Multiple cars interfere with each other
**Fix:**
- Each car pair (control + camera) must share a unique ID:
  - Car 1 â†’ `DEVICE_ID = "CAR01"`
  - Car 2 â†’ `DEVICE_ID = "CAR02"`

#### Steering issues
**Symptom:** A/D keys do nothing or wheels donâ€™t re-center
**Cause:** DC motors free-spin without position feedback
**Fix:**
1. Prefer a **servo motor** (auto-centering, precise)
2. If using DC motor:
   - Use a high gear ratio motor (slow movement)
   - Add mechanical stops for travel limits
   - Tap keys briefly for micro adjustments

#### Steering unresponsive while driving forward
**Symptom:** Holding W blocks A/D
**Cause:** Browser-level key rollover limits
**Fix:**
- Behavior is expected; firmware supports simultaneous commands
- Use an NKRO gaming keyboard or on-screen joystick
- Consider mobile touch controls

---

### ğŸ“Š Expected Performance
| Metric | Target | Observed |
|--------|--------|----------|
| Video FPS | 15 | 10â€“15 |
| Control latency | < 100 ms | 50â€“150 ms |
| Wi-Fi range | 10â€“20 m | Board/environment dependent |
| Battery life | 30â€“60 min | Depends on driving style |

---

### âœ… Checklists

#### Control Board (ESP-32S)
- [ ] Install ESP32 board package in Arduino IDE
- [ ] Install WebSockets library
- [ ] Install ArduinoJson library
- [ ] Enter Wi-Fi SSID/password
- [ ] Enter Render server URL
- [ ] Set `DEVICE_ID` (CAR01)
- [ ] Wire motors to GPIO 12/13/14/15
- [ ] Ensure L298N ENA/ENB jumpers are on
- [ ] Upload firmware successfully
- [ ] Confirm registration on Serial Monitor
- [ ] Self-test passes

#### Camera Board (ESP32-S3)
- [ ] Install ESP32 board package
- [ ] Install WebSockets library
- [ ] Install ArduinoJson library
- [ ] Enter Wi-Fi credentials (same as control)
- [ ] Enter Render server URL (same as control)
- [ ] Set `DEVICE_ID` (match control board)
- [ ] Verify camera pin map
- [ ] Upload firmware successfully
- [ ] Confirm camera init on Serial Monitor
- [ ] Confirm registration on Serial Monitor

#### Server & Frontend
- [ ] Render server deployed
- [ ] Vercel frontend deployed
- [ ] Video visible in browser
- [ ] Controls responsive in browser

---

### ğŸ“š References
- [ESP32 Arduino Documentation](https://docs.espressif.com/projects/arduino-esp32/)
- [ESP32-Camera Library](https://github.com/espressif/esp32-camera)
- [WebSockets Library](https://github.com/Links2004/arduinoWebSockets)
- [L298N Motor Driver Guide](https://lastminuteengineers.com/l298n-dc-stepper-driver-arduino-tutorial/)

---

**Need help?**
- GitHub Issues: https://github.com/YOUR_REPO/issues
- Discord: (community link)

**Updated:** 2025-11-10  
**Version:** v2.0

---

## ğŸ‡°ğŸ‡· í•œêµ­ì–´

# ğŸ”§ Base Revolt v2.0 í•˜ë“œì›¨ì–´ ì„¤ì¹˜ ê°€ì´ë“œ

## ğŸ“¦ ì¤€ë¹„ë¬¼

### ì¡°ì¢…ìš© ESP-32S ë³´ë“œ
- ESP32 ê°œë°œë³´ë“œ (ì¼ë°˜ ESP-32S) x 1
- L298N Mini ëª¨í„° ë“œë¼ì´ë²„ x 1
- **êµ¬ë™ ëª¨í„°** (ì•ë’¤ ë°”í€´ìš©) x 1
- **ìŠ¤í‹°ì–´ë§ ëª¨í„°** (ë°©í–¥ ì „í™˜ìš©) x 1 - DC ëª¨í„° ë˜ëŠ” ì„œë³´ ëª¨í„°
- ì í¼ ì™€ì´ì–´
- 7-12V ë°°í„°ë¦¬ (RCì¹´ìš©)
- USB ì¼€ì´ë¸” (í”Œë˜ì‹±ìš©)

**ì¡°ì¢… ë°©ì‹:**
- ì¼ë°˜ ìë™ì°¨ RCì¹´ ë°©ì‹ (êµ¬ë™ + ìŠ¤í‹°ì–´ë§ ë…ë¦½ ì œì–´)
- íƒ±í¬ ë°©ì‹(ì–‘ìª½ ë°”í€´ ë…ë¦½)ì´ ì•„ë‹Œ ì‹¤ì œ ìë™ì°¨ ì¡°ì¢… ë°©ì‹

### ì¹´ë©”ë¼ìš© ESP32-S3 ë³´ë“œ
- ESP32-S3 WROOM CAM ê°œë°œë³´ë“œ x 1
- OV2640 ë˜ëŠ” OV5640 ì¹´ë©”ë¼ ëª¨ë“ˆ (ë³´í†µ í¬í•¨ë¨)
- USB ì¼€ì´ë¸” (í”Œë˜ì‹±ìš©)
- ë³„ë„ ì „ì› (5V 2A ì´ìƒ ê¶Œì¥)

### ì†Œí”„íŠ¸ì›¨ì–´
- Arduino IDE 1.8.19 ì´ìƒ ë˜ëŠ” 2.x
- ESP32 ë³´ë“œ íŒ¨í‚¤ì§€
- í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

---

## 1ï¸âƒ£ Arduino IDE ì„¤ì •

### ESP32 ë³´ë“œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
1. Arduino IDE ì‹¤í–‰
2. **íŒŒì¼ â†’ í™˜ê²½ì„¤ì •**
3. **ì¶”ê°€ ë³´ë“œ ë§¤ë‹ˆì € URLs**ì— ì¶”ê°€:
```
https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json
```
4. **ë„êµ¬ â†’ ë³´ë“œ â†’ ë³´ë“œ ë§¤ë‹ˆì €**
5. "esp32" ê²€ìƒ‰ â†’ **ESP32 by Espressif Systems** ì„¤ì¹˜ (2.0.14 ì´ìƒ)

### í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
**ë„êµ¬ â†’ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§¤ë‹ˆì €**ì—ì„œ ê²€ìƒ‰ í›„ ì„¤ì¹˜:
1. **WebSockets** by Markus Sattler (v2.4.1 ì´ìƒ)
2. **ArduinoJson** by Benoit Blanchon (v6.21.0 ì´ìƒ)
3. **esp32-camera** (ESP32-S3ìš©, ë³´ë“œ íŒ¨í‚¤ì§€ì— í¬í•¨ë¨)

---

## 2ï¸âƒ£ ì¡°ì¢…ìš© ESP-32S ì„¤ì •

### íšŒë¡œ ì—°ê²° (ìë™ì°¨ ì¡°ì¢… ë°©ì‹)
```
ESP-32S          â†’    L298N Mini
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
GPIO 12          â†’    IN1 (êµ¬ë™ ëª¨í„° - ì•ë’¤)
GPIO 13          â†’    IN2 (êµ¬ë™ ëª¨í„° - ì•ë’¤)
GPIO 14          â†’    IN3 (ìŠ¤í‹°ì–´ë§ ëª¨í„° - ì¢Œìš°)
GPIO 15          â†’    IN4 (ìŠ¤í‹°ì–´ë§ ëª¨í„° - ì¢Œìš°)
5V               â†’    5V (ë¡œì§ ì „ì›)
GND              â†’    GND

L298N Mini       â†’    ëª¨í„° & ë°°í„°ë¦¬
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
OUT1, OUT2       â†’    êµ¬ë™ ëª¨í„° (ì•ë’¤ ë°”í€´)
OUT3, OUT4       â†’    ìŠ¤í‹°ì–´ë§ ëª¨í„° (ì•ë°”í€´ ë°©í–¥)
VIN (12V)        â†’    ë°°í„°ë¦¬ + (7-12V)
GND              â†’    ë°°í„°ë¦¬ -
ENA ì í¼         â†’    ON (ì í¼ ì—°ê²°)
ENB ì í¼         â†’    ON (ì í¼ ì—°ê²°)
```

**ì£¼ì˜ì‚¬í•­:**
- **ì¼ë°˜ RCì¹´ ì¡°ì¢… ë°©ì‹**: êµ¬ë™(ì•ë’¤) + ìŠ¤í‹°ì–´ë§(ì¢Œìš°) ë…ë¦½ ì œì–´
- L298Nì˜ 5V ì „ì›ì€ ESP32ê°€ ì•„ë‹Œ ë³„ë„ ë°°í„°ë¦¬ì—ì„œ ê³µê¸‰
- GNDëŠ” ê³µí†µ ì—°ê²° í•„ìˆ˜
- ëª¨í„° ë°°ì„ ì´ ë°˜ëŒ€ë©´ ë°©í–¥ì´ ë°”ë€” ìˆ˜ ìˆìŒ (ì½”ë“œì—ì„œ ìˆ˜ì • ê°€ëŠ¥)
- ìŠ¤í‹°ì–´ë§ ëª¨í„°ëŠ” ì„œë³´ ëª¨í„° ë˜ëŠ” DC ëª¨í„° ì‚¬ìš© ê°€ëŠ¥

### íŒì›¨ì–´ ì—…ë¡œë“œ
1. Arduino IDEì—ì„œ `hardware/esp32s_control.ino` íŒŒì¼ ì—´ê¸°
2. **ì½”ë“œ ìˆ˜ì • í•„ìš” ë¶€ë¶„** (TODO ì£¼ì„ ë¶€ë¶„):
```cpp
// WiFi ì„¤ì •
const char* ssid = "YOUR_WIFI_SSID";         // â† ì‚¬ìš©ì WiFi ì´ë¦„
const char* password = "YOUR_WIFI_PASSWORD"; // â† ì‚¬ìš©ì WiFi ë¹„ë°€ë²ˆí˜¸

// WebSocket ì„œë²„
const char* ws_host = "base-revolt-server.onrender.com";  // â† Render URL

// ë””ë°”ì´ìŠ¤ ID
const char* DEVICE_ID = "CAR01";  // â† ì—¬ëŸ¬ ëŒ€ë©´ CAR02, CAR03...
```
3. **ë³´ë“œ ì„¤ì •**:
   - ë„êµ¬ â†’ ë³´ë“œ â†’ **ESP32 Dev Module**
   - Upload Speed: **115200**
   - CPU Frequency: **240MHz**
   - Flash Size: **4MB**
   - í¬íŠ¸: USB ì—°ê²°ëœ í¬íŠ¸ ì„ íƒ
4. **ì—…ë¡œë“œ** ë²„íŠ¼ í´ë¦­ (â†’)
5. **ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°** ì—´ê¸° (115200 baud)
   - WiFi ì—°ê²° í™•ì¸
   - WebSocket ì—°ê²° í™•ì¸
   - ë“±ë¡ ë©”ì‹œì§€ í™•ì¸: `{"type":"register","deviceId":"CAR01","role":"control"}`

### í…ŒìŠ¤íŠ¸
- ì—…ë¡œë“œ ì™„ë£Œ í›„ ìë™ìœ¼ë¡œ **ì…€í”„ í…ŒìŠ¤íŠ¸** ì‹¤í–‰
- ëª¨í„°ê°€ ìˆœì„œëŒ€ë¡œ ì›€ì§ì´ëŠ”ì§€ í™•ì¸:
  1. **êµ¬ë™ ì „ì§„** 0.5ì´ˆ â†’ ì •ì§€
  2. **êµ¬ë™ í›„ì§„** 0.5ì´ˆ â†’ ì •ì§€
  3. **ìŠ¤í‹°ì–´ë§ ì¢Œ** 0.3ì´ˆ â†’ ì¤‘ì•™
  4. **ìŠ¤í‹°ì–´ë§ ìš°** 0.3ì´ˆ â†’ ì¤‘ì•™
  5. **ë³µí•© í…ŒìŠ¤íŠ¸** (ì „ì§„ + ì¢ŒíšŒì „) 0.5ì´ˆ

**ë¬¸ì œ í•´ê²°:**
- ëª¨í„°ê°€ ì•ˆ ì›€ì§ì„ â†’ ë°°í„°ë¦¬ ì „ì•• í™•ì¸, ì í¼ ENA/ENB ì—°ê²° í™•ì¸
- êµ¬ë™ ë°©í–¥ì´ ë°˜ëŒ€ â†’ OUT1/OUT2 ë°°ì„  êµì²´ ë˜ëŠ” ì½”ë“œì—ì„œ `MOTOR_DRIVE_IN1/IN2` ë°˜ëŒ€ë¡œ
- ìŠ¤í‹°ì–´ë§ ë°©í–¥ì´ ë°˜ëŒ€ â†’ OUT3/OUT4 ë°°ì„  êµì²´ ë˜ëŠ” ì½”ë“œì—ì„œ `MOTOR_STEER_IN3/IN4` ë°˜ëŒ€ë¡œ
- ìŠ¤í‹°ì–´ë§ì´ ì¤‘ì•™ìœ¼ë¡œ ì•ˆ ëŒì•„ì˜´ â†’ DC ëª¨í„° ëŒ€ì‹  ì„œë³´ ëª¨í„° ì‚¬ìš© ê¶Œì¥

---

## 3ï¸âƒ£ ì¹´ë©”ë¼ìš© ESP32-S3 ì„¤ì •

### íšŒë¡œ ì—°ê²°
ESP32-S3 WROOM CAM ë³´ë“œëŠ” **ì¹´ë©”ë¼ê°€ ì´ë¯¸ í¬í•¨**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
```
ESP32-S3 WROOM   â†’    ì™¸ë¶€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
5V (ë˜ëŠ” USB)    â†’    5V 2A ì „ì›
GND              â†’    GND
```
**ì£¼ì˜ì‚¬í•­:**
- USB ì „ì›ìœ¼ë¡œ ë¶€ì¡±í•˜ë©´ ì™¸ë¶€ 5V 2A ì–´ëŒ‘í„° ì‚¬ìš©
- ì¹´ë©”ë¼ ëª¨ë“ˆì´ ì œëŒ€ë¡œ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸ (ë³´ë“œë§ˆë‹¤ ë‹¤ë¦„)

### íŒì›¨ì–´ ì—…ë¡œë“œ
1. Arduino IDEì—ì„œ `hardware/esp32s3_camera.ino` íŒŒì¼ ì—´ê¸°
2. **ì½”ë“œ ìˆ˜ì • í•„ìš” ë¶€ë¶„**:
```cpp
// WiFi ì„¤ì •
const char* ssid = "YOUR_WIFI_SSID";         // â† ì¡°ì¢… ë³´ë“œì™€ ë™ì¼
const char* password = "YOUR_WIFI_PASSWORD"; // â† ì¡°ì¢… ë³´ë“œì™€ ë™ì¼

// WebSocket ì„œë²„
const char* ws_host = "base-revolt-server.onrender.com";  // â† ì¡°ì¢… ë³´ë“œì™€ ë™ì¼

// ë””ë°”ì´ìŠ¤ ID (ì¤‘ìš”! ì¡°ì¢… ë³´ë“œì™€ ë™ì¼í•´ì•¼ í•¨)
const char* DEVICE_ID = "CAR01";  // â† ì¡°ì¢… ë³´ë“œì™€ ë™ì¼í•œ ID!
```
3. **í•€ë§µ í™•ì¸** (ë³´ë“œë§ˆë‹¤ ë‹¤ë¦„!):
   - ESP32-S3 ë³´ë“œ ëª¨ë¸ì— ë§ëŠ” í•€ë§µ ì‚¬ìš©
   - ê¸°ë³¸ê°’ì€ **Freenove ESP32-S3 WROOM CAM** ê¸°ì¤€
   - ì˜ˆì‹œ:
```cpp
#define PWDN_GPIO_NUM     -1
#define RESET_GPIO_NUM    -1
#define XCLK_GPIO_NUM     10
#define SIOD_GPIO_NUM     40
#define SIOC_GPIO_NUM     39
// ... (ì½”ë“œ ì°¸ì¡°)
```
4. **ë³´ë“œ ì„¤ì •**:
   - ë„êµ¬ â†’ ë³´ë“œ â†’ **ESP32S3 Dev Module**
   - USB CDC On Boot: **Enabled**
   - CPU Frequency: **240MHz**
   - Flash Size: **8MB** (N16R8ì€ 16MB)
   - PSRAM: **OPI PSRAM** (ë³´ë“œì— PSRAM ìˆìœ¼ë©´)
   - í¬íŠ¸: USB ì—°ê²°ëœ í¬íŠ¸ ì„ íƒ
5. **ì—…ë¡œë“œ** ë²„íŠ¼ í´ë¦­
   - BOOT ë²„íŠ¼ ëˆ„ë¥¸ ìƒíƒœë¡œ ì—…ë¡œë“œ ì‹œì‘
   - "Connecting..." ë©”ì‹œì§€ ëœ¨ë©´ RESET ë²„íŠ¼ í•œ ë²ˆ ëˆ„ë¥´ê¸°
   - ì—…ë¡œë“œ ì‹œì‘ë˜ë©´ BOOT ë²„íŠ¼ ë†“ê¸°
6. **ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°** ì—´ê¸° (115200 baud)
   - WiFi ì—°ê²° í™•ì¸
   - ì¹´ë©”ë¼ ì´ˆê¸°í™” í™•ì¸: `âœ… Camera initialized successfully`
   - WebSocket ì—°ê²° í™•ì¸
   - ë“±ë¡ ë©”ì‹œì§€ í™•ì¸: `{"type":"register","deviceId":"CAR01","role":"camera"}`

### í…ŒìŠ¤íŠ¸
- ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ FPS ë¡œê·¸ í™•ì¸ (15 FPS ëª©í‘œ)
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì˜ìƒì´ ë³´ì´ëŠ”ì§€ í™•ì¸

**ë¬¸ì œ í•´ê²°:**
- `Camera init failed` â†’ í•€ë§µ í™•ì¸, ì¹´ë©”ë¼ ëª¨ë“ˆ ì—°ê²° í™•ì¸
- ì˜ìƒ ì•ˆ ë³´ì„ â†’ WiFi/WebSocket ì—°ê²° í™•ì¸, Render ì„œë²„ í™•ì¸
- FPS ë‚®ìŒ â†’ PSRAM í™œì„±í™”, `fb_count` ì„¤ì • í™•ì¸

---

## 4ï¸âƒ£ Render ì„œë²„ ë°°í¬

### ë°©ë²• 1: ê¸°ì¡´ ë°°í¬ ì—…ë°ì´íŠ¸ (ì¶”ì²œ)
```bash
cd C:\dev\BaseRevolt
git add server/index.js
git commit -m "feat: v2.0 ë””ë°”ì´ìŠ¤ ë¶„ë¦¬ ì•„í‚¤í…ì²˜"
git push origin wallet-onchainkit-migration
```
- Render ëŒ€ì‹œë³´ë“œì—ì„œ **ìë™ ë°°í¬** í™•ì¸
- ë¡œê·¸ì—ì„œ `Base Revolt WebSocket Server (v2.0 - Split Architecture)` í™•ì¸

### ë°©ë²• 2: ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
cd server
npm install
npm start
```
- ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:8080` ì ‘ì†
- JSON ì‘ë‹µ í™•ì¸:
```json
{
  "status": "running",
  "service": "Base Revolt WebSocket Server (v2.0 - Split Architecture)",
  "devices": {},
  "webUsers": 0
}
```

---

## 5ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬

### ë¡œì»¬ í…ŒìŠ¤íŠ¸
```bash
cd frontend
npm install
npm run dev
```
- ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000` ì ‘ì†

### Vercel ë°°í¬
```bash
git add frontend/src/components/VideoStream.jsx
git commit -m "feat: v2.0 carId ëª…ì‹œ"
git push origin wallet-onchainkit-migration
```
- Vercelì´ ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.

---

## 6ï¸âƒ£ í†µí•© í…ŒìŠ¤íŠ¸

### ìˆœì„œ
1. **Render ì„œë²„ ì‹¤í–‰ í™•ì¸**
   - `https://base-revolt-server.onrender.com` ì ‘ì†
   - `"status": "running"` í™•ì¸
2. **ì¡°ì¢… ë³´ë“œ ì¼œê¸°**
   - ì „ì› ì—°ê²°
   - ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ ë“±ë¡ í™•ì¸
   - Render ì„œë²„ ë¡œê·¸: `âœ… Device registered: CAR01 (control)`
3. **ì¹´ë©”ë¼ ë³´ë“œ ì¼œê¸°**
   - ì „ì› ì—°ê²°
   - ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ ë“±ë¡ í™•ì¸
   - Render ì„œë²„ ë¡œê·¸: `âœ… Device registered: CAR01 (camera)`
4. **í”„ë¡ íŠ¸ì—”ë“œ ì ‘ì†**
   - `https://base-revolt.vercel.app` ì ‘ì†
   - ì§€ê°‘ ì—°ê²°
   - **Demo Play** ë˜ëŠ” **Buy Ticket** í´ë¦­
5. **í™•ì¸ ì‚¬í•­**
   - âœ… ì˜ìƒ ìŠ¤íŠ¸ë¦¼ì´ ë³´ì´ëŠ”ê°€?
   - âœ… WASD í‚¤ë¡œ RCì¹´ê°€ ì›€ì§ì´ëŠ”ê°€?
     - **W**: ì „ì§„ (êµ¬ë™ ëª¨í„° ì‘ë™)
     - **S**: í›„ì§„ (êµ¬ë™ ëª¨í„° ì—­íšŒì „)
     - **A**: ì¢ŒíšŒì „ (ìŠ¤í‹°ì–´ë§ ëª¨í„° ì™¼ìª½)
     - **D**: ìš°íšŒì „ (ìŠ¤í‹°ì–´ë§ ëª¨í„° ì˜¤ë¥¸ìª½)
     - **Space**: ì •ì§€ (êµ¬ë™ ì •ì§€ + ìŠ¤í‹°ì–´ë§ ì¤‘ì•™)
   - âœ… FPSê°€ 10-15 ì •ë„ ë‚˜ì˜¤ëŠ”ê°€?
   - âœ… ì „ì§„ ì¤‘ ì¢Œ/ìš° ì¡°ì¢…ì´ ë™ì‹œì— ë˜ëŠ”ê°€?

---

## ğŸ› ë¬¸ì œ í•´ê²° (Troubleshooting)

### ì˜ìƒì€ ë³´ì´ëŠ”ë° ì¡°ì¢…ì´ ì•ˆ ë¨
**ì›ì¸:** ì¡°ì¢… ë³´ë“œê°€ ì—°ê²° ì•ˆ ë¨
**í•´ê²°:**
1. ì¡°ì¢… ë³´ë“œ ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„° í™•ì¸
2. WiFi ì—°ê²° ìƒíƒœ í™•ì¸
3. WebSocket ë“±ë¡ ë©”ì‹œì§€ ì „ì†¡ í™•ì¸
4. Render ì„œë²„ì—ì„œ control ë””ë°”ì´ìŠ¤ ë“±ë¡ í™•ì¸

### ì¡°ì¢…ì€ ë˜ëŠ”ë° ì˜ìƒì´ ì•ˆ ë³´ì„
**ì›ì¸:** ì¹´ë©”ë¼ ë³´ë“œê°€ ì—°ê²° ì•ˆ ë¨
**í•´ê²°:**
1. ì¹´ë©”ë¼ ë³´ë“œ ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„° í™•ì¸
2. `Camera init failed` ì—ëŸ¬ â†’ í•€ë§µ í™•ì¸
3. WebSocket ë“±ë¡ ë©”ì‹œì§€ ì „ì†¡ í™•ì¸
4. Render ì„œë²„ì—ì„œ camera ë””ë°”ì´ìŠ¤ ë“±ë¡ í™•ì¸

### ë‘˜ ë‹¤ ì•ˆ ë¨
**ì›ì¸:** Render ì„œë²„ ë¬¸ì œ ë˜ëŠ” WiFi ë¬¸ì œ
**í•´ê²°:**
1. Render ì„œë²„ ë¡œê·¸ í™•ì¸ (ëŒ€ì‹œë³´ë“œ â†’ Logs)
2. ESP32 ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ WiFi ì—°ê²° í™•ì¸
3. `ws_host` ì£¼ì†Œ í™•ì¸ (https:// ë¹¼ê³  ë„ë©”ì¸ë§Œ)
4. ë°©í™”ë²½/ê³µìœ ê¸° ì„¤ì • í™•ì¸

### FPSê°€ ë„ˆë¬´ ë‚®ìŒ (< 5 FPS)
**ì›ì¸:** ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­ ë¶€ì¡± ë˜ëŠ” ì„¤ì • ë¬¸ì œ
**í•´ê²°:**
1. ESP32-S3 PSRAM í™œì„±í™” í™•ì¸
2. ì¹´ë©”ë¼ í•´ìƒë„ ë‚®ì¶”ê¸°: `FRAMESIZE_SVGA` â†’ `FRAMESIZE_VGA`
3. JPEG í’ˆì§ˆ ë‚®ì¶”ê¸°: `jpeg_quality = 12` â†’ `20`
4. WiFi ì‹ í˜¸ ê°•ë„ í™•ì¸

### ë””ë°”ì´ìŠ¤ ID ì¶©ëŒ
**ì¦ìƒ:** ë‘ ëŒ€ì˜ RCì¹´ë¥¼ ìš´ì˜í•  ë•Œ ì„œë¡œ ê°„ì„­
**í•´ê²°:**
- ê° ì°¨ëŸ‰ì˜ ì¡°ì¢…/ì¹´ë©”ë¼ ë³´ë“œì— ë™ì¼í•œ ê³ ìœ  ID ì‚¬ìš©:
  - 1ë²ˆ ì°¨: `DEVICE_ID = "CAR01"` (ì¡°ì¢… + ì¹´ë©”ë¼ ë‘˜ ë‹¤)
  - 2ë²ˆ ì°¨: `DEVICE_ID = "CAR02"` (ì¡°ì¢… + ì¹´ë©”ë¼ ë‘˜ ë‹¤)

### ìŠ¤í‹°ì–´ë§ì´ ì œëŒ€ë¡œ ì‘ë™ ì•ˆ í•¨
**ì¦ìƒ:** A/D í‚¤ë¥¼ ëˆŒëŸ¬ë„ ë°©í–¥ì´ ì•ˆ ë°”ë€Œê±°ë‚˜, ì¤‘ì•™ìœ¼ë¡œ ì•ˆ ëŒì•„ì˜´
**ì›ì¸:** DC ëª¨í„°ëŠ” ìœ„ì¹˜ ìœ ì§€ê°€ ì•ˆ ë˜ê³  ê´€ì„±ìœ¼ë¡œ ê³„ì† íšŒì „
**í•´ê²°:**
1. **ì„œë³´ ëª¨í„° ì‚¬ìš© ê¶Œì¥** (180ë„ íšŒì „ ì„œë³´)
   - ë” ì •í™•í•œ ê°ë„ ì œì–´
   - ì¤‘ì•™ ìœ„ì¹˜ ìë™ ìœ ì§€
   - ì½”ë“œ ìˆ˜ì • í•„ìš” (Servo ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
2. **DC ëª¨í„° ì‚¬ìš© ì‹œ**
   - ê¸°ì–´ë¹„ ë†’ì€ ëª¨í„° ì‚¬ìš© (ëŠë¦¬ê²Œ ì›€ì§ì„)
   - ìŠ¤í‹°ì–´ë§ ë²”ìœ„ ì œí•œ ì¥ì¹˜ ì¶”ê°€ (ë¬¼ë¦¬ì  ìŠ¤í† í¼)
   - í‚¤ë¥¼ ì§§ê²Œ ëˆŒëŸ¬ì„œ ë¯¸ì„¸ ì¡°ì •

### ì „ì§„ ì¤‘ ìŠ¤í‹°ì–´ë§ì´ ì•ˆ ë¨
**ì¦ìƒ:** W í‚¤ ëˆ„ë¥¸ ìƒíƒœì—ì„œ A/D í‚¤ê°€ ì•ˆ ë¨¹í˜
**ì›ì¸:** ë¸Œë¼ìš°ì € í‚¤ë³´ë“œ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì´ìŠˆ
**í•´ê²°:**
- **ì •ìƒ ë™ì‘ì…ë‹ˆë‹¤!** ì½”ë“œëŠ” ë…ë¦½ ì œì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤
- ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‹œ í‚¤ ì…ë ¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- í•´ê²°ì±…:
  1. ë§ˆìš°ìŠ¤ë¡œ ê°€ìƒ ì¡°ì´ìŠ¤í‹± ì‚¬ìš© (í”„ë¡ íŠ¸ì—”ë“œ UI ì¶”ê°€ í•„ìš”)
  2. ê²Œì´ë° í‚¤ë³´ë“œ ì‚¬ìš© (N-key rollover ì§€ì›)
  3. ëª¨ë°”ì¼ì—ì„œ í„°ì¹˜ ì»¨íŠ¸ë¡¤ ì‚¬ìš©

---

## ğŸ“Š ì˜ˆìƒ ì„±ëŠ¥
| í•­ëª© | ëª©í‘œ | ì‹¤ì œ |
|------|------|------|
| ì˜ìƒ FPS | 15 | 10-15 |
| ì œì–´ ì§€ì—° | < 100ms | 50-150ms |
| WiFi ë²”ìœ„ | 10-20m | ë³´ë“œ/í™˜ê²½ ì˜ì¡´ |
| ë°°í„°ë¦¬ ìˆ˜ëª… | 30-60ë¶„ | ëª¨í„° ì‚¬ìš©ëŸ‰ ì˜ì¡´ |

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì¡°ì¢… ë³´ë“œ (ESP-32S)
- [ ] Arduino IDE ESP32 ë³´ë“œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [ ] WebSockets ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- [ ] ArduinoJson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- [ ] WiFi SSID/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
- [ ] Render ì„œë²„ URL ì…ë ¥
- [ ] DEVICE_ID ì„¤ì • (CAR01)
- [ ] ëª¨í„° ë°°ì„  ì—°ê²° (GPIO 12,13,14,15)
- [ ] L298N ENA/ENB ì í¼ ì—°ê²°
- [ ] íŒì›¨ì–´ ì—…ë¡œë“œ ì„±ê³µ
- [ ] ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ ë“±ë¡ í™•ì¸
- [ ] ì…€í”„ í…ŒìŠ¤íŠ¸ í†µê³¼

### ì¹´ë©”ë¼ ë³´ë“œ (ESP32-S3)
- [ ] ESP32 ë³´ë“œ íŒ¨í‚¤ì§€ ì„¤ì¹˜
- [ ] WebSockets ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- [ ] ArduinoJson ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- [ ] WiFi SSID/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ì¡°ì¢… ë³´ë“œì™€ ë™ì¼)
- [ ] Render ì„œë²„ URL ì…ë ¥ (ì¡°ì¢… ë³´ë“œì™€ ë™ì¼)
- [ ] DEVICE_ID ì„¤ì • (ì¡°ì¢… ë³´ë“œì™€ ë™ì¼!)
- [ ] ì¹´ë©”ë¼ í•€ë§µ í™•ì¸/ìˆ˜ì •
- [ ] íŒì›¨ì–´ ì—…ë¡œë“œ ì„±ê³µ
- [ ] ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ ì¹´ë©”ë¼ ì´ˆê¸°í™” í™•ì¸
- [ ] ì‹œë¦¬ì–¼ ëª¨ë‹ˆí„°ì—ì„œ ë“±ë¡ í™•ì¸

### ì„œë²„ & í”„ë¡ íŠ¸ì—”ë“œ
- [ ] Render ì„œë²„ ë°°í¬ ì™„ë£Œ
- [ ] Vercel í”„ë¡ íŠ¸ì—”ë“œ ë°°í¬ ì™„ë£Œ
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ ì˜ìƒ í™•ì¸
- [ ] ë¸Œë¼ìš°ì €ì—ì„œ ì¡°ì¢… í™•ì¸

---

## ğŸ“š ì°¸ê³  ìë£Œ
- [ESP32 Arduino ê³µì‹ ë¬¸ì„œ](https://docs.espressif.com/projects/arduino-esp32/)
- [ESP32-Camera ë¼ì´ë¸ŒëŸ¬ë¦¬](https://github.com/espressif/esp32-camera)
- [WebSockets ë¼ì´ë¸ŒëŸ¬ë¦¬](https://github.com/Links2004/arduinoWebSockets)
- [L298N ëª¨í„° ë“œë¼ì´ë²„ ê°€ì´ë“œ](https://lastminuteengineers.com/l298n-dc-stepper-driver-arduino-tutorial/)

---

**ë¬¸ì œ ë°œìƒ ì‹œ:**
- GitHub Issues: https://github.com/YOUR_REPO/issues
- Discord: (ì»¤ë®¤ë‹ˆí‹° ë§í¬)

**ì‘ì„±ì¼**: 2025-11-10  
**ë²„ì „**: v2.0

